---
layout: post
title: å°ç¨‹åºé¼»ç¥– â€”â€” åœ¨å›½å†…é€æ¸æ¶ˆäº¡çš„ PWA å¯ä»¥å¸¦ç»™æˆ‘ä»¬å“ªäº›å¯ç¤ºï¼Ÿ
categories: JavaScript
description: PWAçš„æ¶ˆäº¡åŠå¯ç¤º
keywords: JS, å‰ç«¯, JavaScript, PWA, Service Worker
hot: true
---

&emsp;&emsp;å¦‚æœæˆ‘è¯´ï¼Œæˆ‘ä»¬è¦è®¨è®ºä¸€ä¸ª 2016 å¹´è¢«æå‡ºã€2017 å¹´è½åœ°ã€è‡³ä»Šåœ¨å›½å†…ä»å¯ç®—ç±ç±æ— åçš„æ¦‚å¿µï¼Œä½ æ˜¯ä¸æ˜¯ä¼šè§‰å¾—è¿™æ²¡æœ‰ä»€ä¹ˆæ„ä¹‰ï¼Ÿ

&emsp;&emsp;äº’è”ç½‘å‘å±•äº†è¿™ä¹ˆä¹…ï¼Œæˆ‘ä»¬è®°ä½äº†â€œNative Appâ€ã€â€œå°ç¨‹åºâ€ã€â€œå¿«åº”ç”¨â€ã€â€œApp clipsâ€ã€â€œHybrid Appâ€ã€â€œWeb Appâ€ï¼Œä¼¼ä¹ç‹¬ç‹¬æ²¡æœ‰ PWAï¼Œä½† **PWA åŠå…¶ç†å¿µå´ä¸€ç›´åœ¨æ¨åŠ¨ç€å‰ç«¯é¢†åŸŸå‰è¿›**ã€‚

> ä»ä¸¥æ ¼æ„ä¹‰ä¸Šæ¥è¯´ï¼Œç™¾åº¦å’Œå¥‡è™ 360 åœ¨ 2013 å¹´æå‡ºçš„[è½»åº”ç”¨](https://wiki.mbalib.com/wiki/%E8%BD%BB%E5%BA%94%E7%94%A8){:target='\_blank'}æ¦‚å¿µï¼Œå’Œå°ç¨‹åºæœ‰æ›´å¤šä¸€è‡´æ€§ã€‚

## PWA æ˜¯ä»€ä¹ˆï¼Ÿ

&emsp;&emsp;ä¼¼ä¹ PWA å¯¹å¾ˆå¤šäººæ¥è¯´æ˜¯å¦‚æ­¤é™Œç”Ÿï¼ŒPWA å¯¹å‰ç«¯å¼€å‘è€…æ¥è¯´å´åˆæ˜¯æ— å¤„ä¸åœ¨ã€‚

### èº«è¾¹çš„ PWA

#### Lighthouse

&emsp;&emsp;å¯¹å‰ç«¯å¼€å‘è€…æ¥è¯´ï¼ŒLighthouse æ˜¯ä¸€ä¸ªå¾ˆç†Ÿæ‚‰çš„ç½‘ç«™æ€§èƒ½è¯Šæ–­å·¥å…·ï¼Œåœ¨è¿™é‡Œï¼Œæˆ‘ä»¬æ€»æ˜¯å¯ä»¥çœ‹åˆ° PWAï¼ˆProgressive Web Appï¼‰çš„èº«å½±ï¼š

![pwa_opt](https://king-hcj.github.io/images/posts/pwa/pwa_opt.png?raw=true)

#### PWA ä¹¦ç±

&emsp;&emsp;åˆæˆ–è€…ï¼Œä½ æ›¾æ— æ„é—´çœ‹åˆ°è¿™äº›ä¹¦ç±æˆ–è€…èµ„æ–™ï¼š

- [![pwa_book](https://king-hcj.github.io/images/posts/pwa/pwa_book.webp?raw=true)](https://github.com/SangKa/PWA-Book-CN){:target='\_blank'}

- [ã€ŠPWA åº”ç”¨å®æˆ˜ã€‹](https://gitee.com/hbche/pwa-book){:target='\_blank'}

#### å¼€å‘è€…ç›¸å…³

&emsp;&emsp;å•Šå“ˆï¼Œè¿™äº›ï¼Œéƒ½æ²¡çœ‹åˆ°è¿‡ï¼Ÿé‚£ä½ æ€»æ˜¯è®¿é—®è¿‡[Google Developers](https://developers.google.com/){:target='\_blank'}å§ï¼Œæˆ–è€…æ€»çœ‹è§è¿‡è¿™æ ·ä¸€ä¸ªå›¾æ ‡ï¼š

![google_dev](https://king-hcj.github.io/images/posts/pwa/google_dev.png?raw=true)

&emsp;&emsp;å¯ä»¥è®¤ä¸ºè¿™ä¸ªå›¾æ ‡åœ¨å“ªé‡Œï¼Œä¸€ä¸ª PWA åº”ç”¨å°±åœ¨å“ªé‡Œï¼Œç‚¹å‡»è¿™ä¸ªæŒ‰é’®ï¼Œå¯ä»¥**å°† PWA åº”ç”¨å®‰è£…åˆ°æ¡Œé¢**ã€‚äºæ˜¯ï¼Œåœ¨çº¿ IDE [StackBlitz.com](https://stackblitz.com/){:target='\_blank'}å‡ºç°äº†ï¼Œå­—èŠ‚å†…éƒ¨ä½¿ç”¨çš„[Goofy Studio PWA](https://studio.bytedance.net/){:target='\_blank'}å‡ºç°äº†ï¼š

![stackblitz](https://king-hcj.github.io/images/posts/pwa/stackblitz.png?raw=true)

#### è°·æ­Œçš„æ¢ç´¢

&emsp;&emsp;ä½†æ˜¯ï¼Œ**åŠ¨ä¸åŠ¨å°±è®²å¼€å‘ï¼ŒçœŸçš„å¤ªå·äº†**ï¼Œè¯´è¯´é‚£äº›æ›´æœ‰æ„æ€çš„ PWA åº”ç”¨å§ã€‚

&emsp;&emsp;2018 Google Chrome å¼€å‘è€…å³°ä¼šä¸Šï¼ŒGoogle å‘å¸ƒäº†[Squoosh](https://squoosh.app/){:target='\_blank'}ï¼Œè¿™æ˜¯ä¸€ä¸ªå¼€æºçš„å›¾ç‰‡å‹ç¼©æ¸è¿›å¼ Web åº”ç”¨ï¼ˆPWAï¼‰ï¼Œå®ƒåŒæ—¶ä¹Ÿæ˜¯ç°ä»£ Web æŠ€æœ¯çš„ä¸€ä¸ªå®é™…å±•ç¤ºï¼Œ[è°·æ­Œå®éªŒå®¤å‘å¸ƒ Squoosh](https://www.infoq.com/news/2018/11/google-squoosh-pwa-webassembly/){:target='\_blank'} çš„ä¸»è¦ç›®æ ‡æ˜¯æ¼”ç¤ºé«˜çº§ web åº”ç”¨ç¨‹åºå¦‚ä½•åˆ©ç”¨ç°ä»£æŠ€æœ¯åœ¨ web æµè§ˆå™¨ä¸­æä¾›é«˜æ€§èƒ½çš„ä½“éªŒã€‚

![squoosh](https://king-hcj.github.io/images/posts/pwa/squoosh.png?raw=true)

&emsp;&emsp;[PROXX](https://proxx.app/){:target='\_blank'}æ˜¯è°·æ­Œ Chrome å›¢é˜Ÿæ¨å‡ºçš„ä¸€æ¬¾ JavaScript æ¸¸æˆã€‚è¯¥é¡¹ç›®å±•ç¤ºäº†å¦‚ä½•å¼€å‘å¿«é€Ÿå¹³æ»‘çš„ Web åº”ç”¨ï¼Œè¿™äº›åº”ç”¨åœ¨å¤šç§å¹³å°å’Œè¾“å…¥è®¾å¤‡ä¸Šæä¾›äº†ç›¸è¿‘çš„ç”¨æˆ·ä½“éªŒã€‚Proxx é¡¹ç›®çš„ç‹¬åˆ°ä¹‹å¤„åœ¨äºå®ƒä¸»è¦é’ˆå¯¹çš„æ˜¯**æ™ºèƒ½åŠŸèƒ½æœº**ã€‚

> æ™ºèƒ½åŠŸèƒ½æœºæ˜¯ä½ä»·æ™ºèƒ½æœºæ›¿ä»£è®¾å¤‡ï¼Œåœ¨å°åº¦å’Œéæ´²å¹¿ä¸ºä½¿ç”¨ã€‚ç›¸å¯¹äºæ™ºèƒ½æœºï¼Œæ™ºèƒ½åŠŸèƒ½æœºçš„ç¡¬ä»¶éå¸¸ç®€å•ã€‚å®ƒä¸æ”¯æŒè§¦æ§ï¼Œå±å¹•ç›¸å¯¹è¾ƒå°ï¼Œå¤§å¤šé‡‡ç”¨ 240x320 åˆ†è¾¨ç‡çš„ QVGA å±ï¼ŒCPU çš„å¤„ç†èƒ½åŠ›ä¹Ÿç›¸å¯¹è¾ƒå¼±ã€‚

![proxx](https://king-hcj.github.io/images/posts/pwa/proxx.png?raw=true)

&emsp;&emsp;è¿™æ˜¯ä¸€æ¬¾ JavaScript æ¸¸æˆæ‰«é›·æ¸¸æˆï¼Œ**æ‘¸é±¼æ—¶å¯ä»¥ç©å„¿ç©å„¿ï¼Œå¦‚æœä¸å¹¸è¢«è€æ¿æ’è§ï¼Œä½ å°±è¯´åœ¨ç ”ç©¶ PWA å˜›**ã€‚

#### å¾®åš Lite

&emsp;&emsp;[å¾®åš Lite](https://m.weibo.cn){:target='\_blank'}ï¼Œæˆ‘ç›¸ä¿¡ï¼Œè¿™ï¼Œåº”è¯¥æ˜¯ PWA ç¦»ä½ æœ€è¿‘çš„ä¸€æ¬¡ï¼š

![weibo](https://king-hcj.github.io/images/posts/pwa/weibo.png?raw=true)

&emsp;&emsp;**æˆ‘çŒœä½ ä¸€å®šä¸ä¼šé—®**ï¼šæ—¢ç„¶ PWA åº”ç”¨è¿˜æ˜¯è›®å¹¿æ³›çš„ï¼Œé‚£ï¼Œå®ƒä¸€å®šå¾ˆå¼ºå¤§å§ï¼Ÿ

&emsp;&emsp;è’½ï¼Œå¼ºä¸å¼ºå¤§çœ‹çœ‹æ•°æ®å°±çŸ¥é“äº†ã€‚

#### å¼ºå¤§çš„ç”Ÿäº§åŠ›

- 2017 å¹´çš„[ä¸€ç¯‡æŠ€æœ¯åšæ–‡](https://medium.com/dev-channel/a-pinterest-progressive-web-app-performance-case-study-3bd6ed2e6154){:target='\_blank'}æ˜¾ç¤ºï¼Œå ªç§°å›¾ç‰‡ç‰ˆçš„ Twitter çš„ Pinterest å°†ä»–ä»¬çš„ç§»åŠ¨ç½‘ç«™é‡å»ºä¸º PWAï¼Œæ ¸å¿ƒå‚ä¸åº¦å¢åŠ äº† 60%ï¼Œç”¨æˆ·äº§ç”Ÿçš„å¹¿å‘Šæ”¶å…¥å¢åŠ äº† 44%ï¼ŒèŠ±è´¹çš„æ—¶é—´ä¹Ÿå¢åŠ äº† 40%ï¼›

![compare_mobile_web](https://king-hcj.github.io/images/posts/pwa/compare_mobile_web.png?raw=true)

![compare_pwa_app](https://king-hcj.github.io/images/posts/pwa/compare_pwa_app.png?raw=true)

- 2016 å¹´åˆ AliExpress å¼€å§‹ä¸ Google å›¢é˜Ÿåˆä½œï¼Œæ¨åŠ¨ PWA æŠ€æœ¯åœ¨ AliExpress ä¸Šçš„è½åœ°ï¼›ç»“æœæ˜¯éå¸¸ä»¤äººæƒŠå¥‡å’Œæ»¡æ„çš„ã€‚AliExpress å‘ç°[æ–°ç”¨æˆ·çš„è½¬æ¢ç‡å¢åŠ äº† 104ï¼…](https://zhuanlan.zhihu.com/p/26445223){:target='\_blank'}ã€‚åœ¨ Safari çš„è½¬åŒ–ç‡ä¹Ÿä¸Šå‡äº† 82ï¼…ã€‚ç°åœ¨ç”¨æˆ·æ¯æ¬¡è®¿é—®çš„é¡µé¢æ•°é‡æ˜¯åŸå…ˆçš„ä¸¤å€ï¼Œä¹Ÿå¤§å¤§æå‡äº†ç”¨æˆ·æµè§ˆé¡µé¢çš„æ—¶é—´ï¼›

- ç±»ä¼¼è¿™æ ·çš„æˆåŠŸæ¡ˆä¾‹æ•°ä¸èƒœæ•°ï¼Œä¸ºäº†æ–¹ä¾¿ä½ ç›´æ¥ä¸¢åˆ°è€æ¿è„¸ä¸Šï¼Œæˆ‘æ¢³ç†äº†è¿™ä¸ªå›¾ ğŸ˜‚ï¼š

![pwa_productivity](https://king-hcj.github.io/images/posts/pwa/pwa_productivity.png?raw=true)

&emsp;&emsp;æˆ‘è§‰å¾—ä½ å¯ä»¥å‘Šè¯‰ä»–ï¼š**è¿™äº›ä¸ä»…ä»…æ˜¯æ•°å­—ï¼Œè¿™äº›éƒ½æ˜¯ PWA çš„æˆåŠŸæ¡ˆä¾‹**ã€‚

&emsp;&emsp;è€æ¿è¯´ï¼š**è¿™äº›å’Œå¢™å†…çš„ä½ æˆ‘ï¼Œè·ç¦»èƒ½æœ‰å¤šè¿‘ï¼Ÿ**
&emsp;&emsp;æ²¡äº‹ï¼Œç¦»æˆ‘ä»¬æœ€è¿‘çš„ PWA åº”ç”¨å°†åœ¨ä½ çš„æ‰‹ä¸Šè¯ç”Ÿã€‚

### PWA è¯ç”Ÿçš„æ¡ä»¶

&emsp;&emsp;æˆ‘ä»¬åº”è¯¥éƒ½æ·±æœ‰ä½“ä¼šï¼ŒNative app ä½“éªŒç¡®å®å¾ˆå¥½ï¼Œä¸‹è½½åˆ°æ‰‹æœºä¸Šä¹‹åå…¥å£ä¹Ÿæ–¹ä¾¿ã€‚ä½†å®ƒçš„ä¼˜ç¼ºç‚¹å¾ˆæ˜æ˜¾:

![native_app](https://king-hcj.github.io/images/posts/pwa/native_app.png?raw=true)

&emsp;&emsp;è€Œ web ç½‘é¡µå¼€å‘æˆæœ¬ä½ï¼Œç½‘ç«™æ›´æ–°æ—¶ä¸Šä¼ æœ€æ–°çš„èµ„æºåˆ°æœåŠ¡å™¨å³å¯ï¼Œç”¨æ‰‹æœºå¸¦çš„æµè§ˆå™¨æ‰“å¼€å°±å¯ä»¥ä½¿ç”¨ã€‚ä½†æ˜¯é™¤äº†ä½“éªŒä¸Šæ¯” Native app è¿˜æ˜¯å·®ä¸€äº›ï¼Œè¿˜æœ‰ä¸€äº›æ˜æ˜¾çš„ç¼ºç‚¹ï¼š

![web_app](https://king-hcj.github.io/images/posts/pwa/web_app.png?raw=true)

&emsp;&emsp;åœ¨è¿™äº›å› ç´ çš„æ¨åŠ¨ä¸‹ï¼Œ**Web åº”ç”¨æ¸è¿›å¼æ¥è¿‘åŸç”Ÿ App**çš„æ¦‚å¿µ â€”â€” PWA è¯ç”Ÿäº†ã€‚

### PWA ç®€ä»‹

#### ä»€ä¹ˆæ˜¯æ¸è¿›å¼

&emsp;&emsp;PWA å…¨ç§°ä¸º Progressive Web Appï¼Œä¸­æ–‡è¯‘ä¸ºæ¸è¿›å¼ Web APPï¼Œé‚£ä¹ˆï¼Œä»€ä¹ˆæ˜¯æ¸è¿›å¼å‘¢ï¼Ÿæˆ‘è§‰å¾—æ¸è¿›å¼æœ‰ä¸¤ä¸ªå±‚é¢çš„æ„æ€ï¼š

&emsp;&emsp;ä¸€æ˜¯é€šè¿‡å„ç§ Web æŠ€æœ¯å®ç°ä¸åŸç”Ÿ App ç›¸è¿‘çš„ç”¨æˆ·ä½“éªŒï¼Œå³**Web åº”ç”¨æ¸è¿›å¼æ¥è¿‘åŸç”Ÿ App**ã€‚

&emsp;&emsp;äºŒæ˜¯ç”±äºåœ¨å½“æ—¶çš„èƒŒæ™¯ä¸‹ï¼Œä¸€äº›æµè§ˆå™¨æš‚æ—¶ä¸æ”¯æŒï¼Œå¯ä»¥åˆ©ç”¨ PWA ç›¸å…³æŠ€æœ¯ï¼Œ**ç»™æ”¯æŒ PWA çš„æµè§ˆå™¨ç”¨æˆ·å¸¦æ¥æ›´å¥½çš„ä½“éªŒ**ã€‚

&emsp;&emsp;å¦å¤–ï¼Œä¹Ÿè®¸ä½ å¬è¿‡**æ¸è¿›å¢å¼º**ï¼ˆProgressive Enhancementï¼‰å’Œ**ä¼˜é›…é™çº§**ï¼ˆGraceful Degradationï¼‰è¿™ä¸¤ä¸ªæ¦‚å¿µã€‚

&emsp;&emsp;æ¸è¿›å¢å¼ºï¼šé’ˆå¯¹ä½ç‰ˆæœ¬æµè§ˆå™¨è¿›è¡Œæ„å»ºé¡µé¢ï¼Œå®ŒæˆåŸºæœ¬çš„åŠŸèƒ½ï¼Œç„¶åå†é’ˆå¯¹é«˜çº§æµè§ˆå™¨è¿›è¡Œæ•ˆæœã€äº¤äº’ã€è¿½åŠ åŠŸèƒ½ä»¥è¾¾åˆ°æ›´å¥½çš„ä½“éªŒã€‚

&emsp;&emsp;ä¼˜é›…é™çº§ï¼šæ„å»ºç«™ç‚¹çš„å®Œæ•´åŠŸèƒ½ï¼Œç„¶åé’ˆå¯¹æµè§ˆå™¨æµ‹è¯•å’Œä¿®å¤ã€‚æ¯”å¦‚ä¸€å¼€å§‹ä½¿ç”¨ CSS3 çš„ç‰¹æ€§æ„å»ºäº†ä¸€ä¸ªåº”ç”¨ï¼Œç„¶åé€æ­¥é’ˆå¯¹å„å¤§æµè§ˆå™¨è¿›è¡Œ hack ä½¿å…¶å¯ä»¥åœ¨ä½ç‰ˆæœ¬æµè§ˆå™¨ä¸Šæ­£å¸¸æµè§ˆã€‚

&emsp;&emsp;PWA æœ¬è´¨ä¸Šæ˜¯ WEB åº”ç”¨ï¼Œæ‰€ä»¥ï¼Œæˆ‘è§‰å¾—è¿™ç§â€œæ¸è¿›å¼â€å…¶å®æ˜¯ä¸€ç§æ¸è¿›å¢å¼ºçš„ç†å¿µã€‚

#### PWA çš„æ¦‚å¿µ

> ä¸­æ–‡å®˜ç½‘è§£é‡Šï¼šé‡‡ç”¨æ‰€æœ‰æ­£ç¡®ç»„æˆè¦ç´ çš„ç½‘ç«™ã€‚

![pwa](https://king-hcj.github.io/images/posts/pwa/pwa.png?raw=true)

&emsp;&emsp;PWA æ˜¯ Google äº 2016 å¹´æå‡ºçš„æ¦‚å¿µï¼Œäº 2017 å¹´æ­£å¼è½åœ°ï¼Œäº 2018 å¹´è¿æ¥é‡å¤§çªç ´ï¼Œ**å…¨çƒé¡¶çº§çš„æµè§ˆå™¨å‚å•†ï¼ŒGoogleã€Microsoftã€Apple å·²ç»å…¨æ•°å®£å¸ƒæ”¯æŒ PWA æŠ€æœ¯**ã€‚

&emsp;&emsp;çºµè§‚ç°æœ‰ Web åº”ç”¨ä¸åŸç”Ÿåº”ç”¨çš„å¯¹æ¯”å·®è·ï¼Œå¦‚ç¦»çº¿ç¼“å­˜ã€æ²‰æµ¸å¼ä½“éªŒç­‰ç­‰ï¼Œå¯ä»¥é€šè¿‡å·²ç»å®ç°çš„ Web æŠ€æœ¯å»å¼¥è¡¥è¿™äº›å·®è·ï¼Œæœ€ç»ˆè¾¾åˆ°ä¸åŸç”Ÿåº”ç”¨ç›¸è¿‘çš„ç”¨æˆ·ä½“éªŒæ•ˆæœã€‚

&emsp;&emsp;**ä¸€ä¸ª PWA åº”ç”¨é¦–å…ˆæ˜¯ä¸€ä¸ªç½‘é¡µ, å¯ä»¥é€šè¿‡ Web æŠ€æœ¯ç¼–å†™å‡ºä¸€ä¸ªç½‘é¡µåº”ç”¨. éšåæ·»åŠ ä¸Š App Manifest å®ç°æ·»åŠ è‡³ä¸»å±å¹•ï¼Œ é€šè¿‡ Service Worker æ¥å®ç°ç¦»çº¿ç¼“å­˜å’Œæ¶ˆæ¯æ¨é€ç­‰åŠŸèƒ½**ã€‚

&emsp;&emsp;[Web Application Manifest](https://w3c.github.io/manifest/){:target='\_blank'}ï¼Œå³é€šè¿‡ä¸€ä¸ªæ¸…å•æ–‡ä»¶å‘æµè§ˆå™¨æš´éœ² web åº”ç”¨çš„å…ƒæ•°æ®ï¼ŒåŒ…æ‹¬åç§°ã€icon çš„ URL ç­‰ï¼Œä»¥å¤‡æµè§ˆå™¨ä½¿ç”¨ï¼Œæ¯”å¦‚åœ¨æ·»åŠ è‡³ä¸»å±æˆ–æ¨é€é€šçŸ¥æ—¶æš´éœ²ç»™æ“ä½œç³»ç»Ÿï¼Œä»è€Œå¢å¼º web åº”ç”¨ä¸æ“ä½œç³»ç»Ÿçš„é›†æˆèƒ½åŠ›ã€‚

&emsp;&emsp;æˆ‘ä»¬**åŸæœ‰çš„æ•´ä¸ª Web åº”ç”¨æ¨¡å‹ï¼Œéƒ½æ˜¯æ„å»ºåœ¨ã€Œç”¨æˆ·èƒ½ä¸Šç½‘ã€çš„å‰æä¹‹ä¸‹çš„**ï¼Œæ‰€ä»¥ä¸€ç¦»çº¿å°±åªèƒ½ç©å°æé¾™äº†ã€‚å…¶å®ï¼Œå¯¹äºã€Œè®© web åº”ç”¨ç¦»çº¿æ‰§è¡Œã€è¿™ä»¶äº‹ï¼Œæœ€æ—©å¯ä»¥è¿½æº¯åˆ° 2007 å¹´çš„ Google Gearsï¼šä¸ºäº†è®©è‡ªå®¶çš„ Gmailã€Youtubeã€Google Reader ç­‰ web åº”ç”¨å¯ä»¥åœ¨æœ¬åœ°å­˜å‚¨æ•°æ®ä¸ç¦»çº¿æ‰§è¡Œï¼ŒGoogle å¼€å‘äº†ä¸€ä¸ªæµè§ˆå™¨æ‹“å±•æ¥å¢å¼º web åº”ç”¨ã€‚Google Gears æ”¯æŒ IE 6ã€Safari 3ã€Firefox 1.5 ç­‰æµè§ˆå™¨ï¼›è¦çŸ¥é“ï¼Œé‚£ä¸€å¹´ Chrome éƒ½è¿˜æ²¡å‡ºç”Ÿå‘¢ã€‚

> Gearsï¼Œå‰èº«ä¸º Google Gearsï¼Œæ˜¯ç”± Google æä¾›çš„å·²åœäº§çš„å®ç”¨è½¯ä»¶ï¼Œç”¨äºé€šè¿‡å‘ Web æµè§ˆå™¨æ·»åŠ ç¦»çº¿å­˜å‚¨å’Œå…¶ä»–é™„åŠ åŠŸèƒ½æ¥åˆ›å»ºæ›´å¼ºå¤§çš„ Web åº”ç”¨ç¨‹åºã€‚Gears æ˜¯åœ¨æ²¡æœ‰å¯æ¯”æ›¿ä»£å“çš„æ—¶å€™æ„æ€çš„ï¼Œåæ¥ï¼ŒGears è¢«ç»ˆæ­¢ï¼Œå–è€Œä»£ä¹‹çš„æ˜¯æœ€ç»ˆæµè¡Œ çš„æ ‡å‡†åŒ– HTML5 æ–¹æ³•ã€‚åœ¨ Gears API ä¸­ï¼Œæˆ‘ä»¬é€šè¿‡å‘ LocalServer æ¨¡å—æäº¤ä¸€ä¸ªç¼“å­˜æ–‡ä»¶æ¸…å•æ¥å®ç°ç¦»çº¿æ”¯æŒã€‚

&emsp;&emsp;Service Worker æ˜¯ä¸€ä¸ªå¯ç¼–ç¨‹çš„ Web Workerï¼Œå®ƒå°±åƒä¸€ä¸ªä½äºæµè§ˆå™¨ä¸ç½‘ç»œä¹‹é—´çš„å®¢æˆ·ç«¯ä»£ç†ï¼Œå¯ä»¥æ‹¦æˆªã€å¤„ç†ã€å“åº”æµç»çš„ HTTP è¯·æ±‚ï¼›é…åˆéšä¹‹å¼•å…¥ Cache Storage APIï¼Œä½ å¯ä»¥è‡ªç”±ç®¡ç† HTTP è¯·æ±‚æ–‡ä»¶ç²’åº¦çš„ç¼“å­˜ï¼Œè¿™ä½¿å¾— Service Worker å¯ä»¥ä»ç¼“å­˜ä¸­å‘ web åº”ç”¨æä¾›èµ„æºï¼Œå³ä½¿æ˜¯åœ¨ç¦»çº¿çš„ç¯å¢ƒä¸‹ã€‚

### PWA å®ç°

![sw_img](https://king-hcj.github.io/images/posts/pwa/sw_img.gif?raw=true)

#### å®ç°

&emsp;&emsp;ä¸€ä¸ªç®€å•çš„ PWA demo å¾ˆç®€å•ï¼Œæ–°å»ºé¡¹ç›®ç›®å½•ï¼Œç„¶åï¼š

```sh
touch index.html
touch sw.js
npm install serve -g
```

&emsp;&emsp;ä¹‹åè¿›è¡Œç®€å•çš„ html å’Œ sw.js æ–‡ä»¶çš„ç¼–å†™ï¼Œæœ€åé€šè¿‡ manifest.json å®ç°æ·»åŠ åˆ°æ¡Œé¢åŠŸèƒ½ï¼Œå®Œæ•´ä»£ç å¯ä»¥æŸ¥çœ‹[è¿™é‡Œ](https://stackblitz.com/edit/web-platform-x4trmv){:target='\_blank'}ã€‚

```json
// manifest.json
{
  "name": "Progressive Web App",
  "short_name": "PWA",
  "description": "Progressive Web App.",
  "icons": [
    {
      "src": "/icon.png",
      "sizes": "288x288", // è¿™é‡Œéœ€è¦æ ¼å¤–æ³¨æ„å›¾ç‰‡çš„å°ºå¯¸ï¼Œå¦‚æœå›¾ç‰‡æœ‰é—®é¢˜ï¼Œè°ƒè¯•é¡µé¢Manifesté‡Œä¼šç»™ä½ æç¤º
      "type": "image/png"
    }
  ],
  "start_url": "/",
  "display": "standalone",
  "theme_color": "#B12A34",
  "background_color": "#B12A34"
}
```

&emsp;&emsp;ç¤ºä¾‹ demoï¼š

![pwa_demo](https://king-hcj.github.io/images/posts/pwa/pwa_demo.png?raw=true)

&emsp;&emsp;é€šè¿‡å¯¹ manifest.json è¿›è¡Œç›¸åº”é…ç½®ï¼Œå¯ä»¥å®ç°ä»¥ä¸‹åŠŸèƒ½ï¼š

![manifest](https://king-hcj.github.io/images/posts/pwa/manifest.png?raw=true)

#### App Shell æ¨¡å‹

&emsp;&emsp;å¦å¤–ï¼Œæˆ‘è§‰å¾—æœ‰å¿…è¦ä»‹ç»ä¸€ä¸‹çš„æ˜¯ App Shell æ¨¡å‹ã€‚

&emsp;&emsp;[App Shell æ¶æ„](https://www.wenjiangs.com/doc/o6rquebe){:target='\_blank'}æ˜¯æ„å»º Progressive Web App çš„ä¸€ç§æ–¹å¼ï¼Œè¿™ç§åº”ç”¨èƒ½å¯é ä¸”å³æ—¶åœ°åŠ è½½åˆ°æ‚¨çš„ç”¨æˆ·å±å¹•ä¸Šï¼Œä¸æœ¬æœºåº”ç”¨ç›¸ä¼¼ã€‚

&emsp;&emsp;Appâ€œshellâ€æ˜¯**æ”¯æŒç”¨æˆ·ç•Œé¢æ‰€éœ€çš„æœ€å°çš„ HTMLã€CSS å’Œ JavaScript**ï¼Œå¦‚æœç¦»çº¿ç¼“å­˜ï¼Œå¯ç¡®ä¿åœ¨ç”¨æˆ·é‡å¤è®¿é—®æ—¶æä¾›å³æ—¶ã€å¯é çš„è‰¯å¥½æ€§èƒ½ã€‚è¿™æ„å‘³ç€å¹¶ä¸æ˜¯æ¯æ¬¡ç”¨æˆ·è®¿é—®æ—¶éƒ½è¦ä»ç½‘ç»œåŠ è½½ App Shellï¼Œåªéœ€è¦ä»ç½‘ç»œä¸­åŠ è½½å¿…è¦çš„å†…å®¹ã€‚

&emsp;&emsp;å¯¹äºä½¿ç”¨åŒ…å«å¤§é‡ JavaScript çš„æ¶æ„çš„å•é¡µåº”ç”¨æ¥è¯´ï¼ŒApp Shell æ˜¯ä¸€ç§å¸¸ç”¨æ–¹æ³•ã€‚è¿™ç§æ–¹æ³•ä¾èµ–æ¸è¿›å¼ç¼“å­˜ Shellï¼ˆä½¿ç”¨ Service Worker çº¿ç¨‹ï¼‰è®©åº”ç”¨è¿è¡Œï¼Œæ¥ä¸‹æ¥ï¼Œä¸ºä½¿ç”¨ JavaScript çš„æ¯ä¸ªé¡µé¢åŠ è½½åŠ¨æ€å†…å®¹ã€‚App Shell éå¸¸é€‚åˆç”¨äºåœ¨æ²¡æœ‰ç½‘ç»œçš„æƒ…å†µä¸‹å°†ä¸€äº›åˆå§‹ HTML å¿«é€ŸåŠ è½½åˆ°å±å¹•ä¸Šã€‚

![appshell](https://king-hcj.github.io/images/posts/pwa/appshell.png?raw=true)

#### ä»å¾®åš Lite çœ‹ PWA

&emsp;&emsp;å®‰è£… PWAï¼š

![weibo_install](https://king-hcj.github.io/images/posts/pwa/weibo_install.png?raw=true)

&emsp;&emsp;å®‰è£…åï¼ŒPWA åº”ç”¨å°±ä¼šå‡ºç°åœ¨æ¡Œé¢/Chrome åº”ç”¨é‡Œé¢ï¼š

![weibo_icon](https://king-hcj.github.io/images/posts/pwa/weibo_icon.png?raw=true)

&emsp;&emsp;ä»ä¸‹å›¾å¯ä»¥çœ‹å‡ºï¼Œç‚¹å‡»æ¡Œé¢å›¾æ ‡æ‰“å¼€åï¼Œæˆ‘ä»¬å¯ä»¥é€‰æ‹©å¸è½½ PWAï¼Œå›¾æ ‡å°†ä¼šä»æ¡Œé¢ç§»é™¤ï¼›åŒæ—¶ï¼Œæˆ‘ä»¬è¿˜å¯ä»¥å‘ç°ï¼Œå¾®åš Lite é™¤äº†ç¼“å­˜å›¾ç‰‡ã€JSã€CSS ç­‰é™æ€èµ„æºå¤–ï¼Œä¹Ÿä¼šç¼“å­˜æ¥å£ï¼š

![weibo_detail](https://king-hcj.github.io/images/posts/pwa/weibo_detail.png?raw=true)

&emsp;&emsp;å½“æˆ‘ä»¬å°†ç½‘ç»œè®¾ç½®æˆç¦»çº¿æ—¶ï¼Œåˆ·æ–°é¡µé¢ï¼Œä¾ç„¶å¯ä»¥ç»§ç»­æµè§ˆé¡µé¢ä¸Šä¸Šæ¬¡åŠ è½½è¿‡çš„ä¿¡æ¯ï¼Œæå‡ç”¨æˆ·ä½“éªŒï¼š

![weibo_offline](https://king-hcj.github.io/images/posts/pwa/weibo_offline.png?raw=true)

### PWA çš„ä¼˜åŠ¿ä¸åŠ£åŠ¿

![pwa_processon](https://king-hcj.github.io/images/posts/pwa/pwa_processon.png?raw=true)

&emsp;&emsp;åœ¨è¿™äº›å­˜åœ¨çš„é—®é¢˜é‡Œé¢ï¼Œç®€å•ä»‹ç»ä¸€ä¸‹æ‘©å°”å®šå¾‹ã€‚

&emsp;&emsp;ä¸ªäººè®¤ä¸ºï¼Œ**æ‘©å°”å®šå¾‹æ˜¯èŠ¯ç‰‡é¢†åŸŸçš„ OKR**ã€‚æ‘©å°”åœ¨ 1965 å¹´æ–‡ç« ä¸­æŒ‡å‡ºï¼ŒèŠ¯ç‰‡ä¸­çš„æ™¶ä½“ç®¡å’Œç”µé˜»å™¨çš„æ•°é‡æ¯å¹´ä¼šç¿»ç•ªï¼ŒåŸå› æ˜¯å·¥ç¨‹å¸ˆå¯ä»¥ä¸æ–­ç¼©å°æ™¶ä½“ç®¡çš„ä½“ç§¯ã€‚è¿™å°±æ„å‘³ç€ï¼ŒåŠå¯¼ä½“çš„æ€§èƒ½ä¸å®¹é‡å°†ä»¥æŒ‡æ•°çº§å¢é•¿ï¼Œå¹¶ä¸”è¿™ç§å¢é•¿è¶‹åŠ¿å°†ç»§ç»­å»¶ç»­ä¸‹å»ã€‚1975 å¹´ï¼Œæ‘©å°”åˆä¿®æ­£äº†æ‘©å°”å®šå¾‹ï¼Œä»–è®¤ä¸ºï¼Œæ¯éš” 24 ä¸ªæœˆï¼Œæ™¶ä½“ç®¡çš„æ•°é‡å°†ç¿»ç•ªã€‚

&emsp;&emsp;æ™¶ä½“ç®¡æ•°é‡ç¿»å€å¸¦æ¥çš„å¥½å¤„å¯ä»¥æ€»ç»“ä¸ºï¼š**æ›´å¿«ï¼Œæ›´å°ï¼Œæ›´ä¾¿å®œ**ã€‚æ ¹æ®æ‘©å°”å®šå¾‹ï¼ŒèŠ¯ç‰‡è®¾è®¡å¸ˆçš„ä¸»è¦ä»»åŠ¡ä¾¿æ˜¯ç¼©å°æ™¶ä½“ç®¡çš„å¤§å°ï¼Œç„¶åè®©èŠ¯ç‰‡èƒ½å¤Ÿå®¹çº³è¶Šå¤šçš„æ™¶ä½“ç®¡ã€‚æ™¶ä½“ç®¡çš„å¢åŠ å¯ä»¥è®©è®¾è®¡å¸ˆä¸ºèŠ¯ç‰‡æ·»åŠ æ›´å¤šçš„åŠŸèƒ½ï¼Œæ¯”å¦‚ 3D æ˜¾å¡ï¼Œä»è€ŒèŠ‚çº¦æˆæœ¬ã€‚

&emsp;&emsp;å¯ä»¥çœ‹å‡ºï¼Œæ‘©å°”å®šå¾‹æ˜¯å’Œæˆ‘ä»¬ä¹¦æœ¬ä¸Šçœ‹åˆ°çš„å…¬å¼ã€å®šç†å­˜åœ¨å¾ˆå¤§åŒºåˆ«çš„ï¼Œ**å®ƒæ›´å¤šçš„æ˜¯ä¸€ä¸ªç»éªŒæ€»ç»“ï¼Œæ˜¯èŠ¯ç‰‡é¢†åŸŸè‡ªé©±çš„ OKR**ã€‚

&emsp;&emsp;å¦‚æœè¯´ä¸€å¼€å§‹äººä»¬åŸ‹æ€¨æ‰‹æœºå†…å­˜å’Œæµé‡èµ„è´¹çš„é™åˆ¶ï¼Œè€Œä¸æƒ³å®‰è£…å¤ªå¤šçš„ Appï¼Œæ ¹æ®æ‘©å°”å®šå¾‹ï¼Œç°åœ¨çš„æ‰‹æœºå†…å­˜ä¸ç¡¬ä»¶éƒ½åœ¨æå‡ï¼Œè¿è¥å•†èµ„è´¹ä¸‹è°ƒã€‚è¿™**ä½¿å¾— PWA æœ€åˆå¾—ä»¥å‡ºç°çš„æ ¹åŸºå¼€å§‹åŠ¨æ‘‡**ã€‚æ‰€ä»¥ï¼ŒPWA ç°åœ¨å›½å†…é¢ä¸´çš„å¤„å¢ƒå³ï¼šç”¨æˆ·ä¸çŸ¥é“ï¼Œä¹Ÿä¸ä¼šç”¨ï¼Œå¼€å‘è€…ä¸è§å¾—æ”¯æŒï¼Œä¹Ÿä¸å¦‚å°ç¨‹åºå‹å¥½ã€‚

&emsp;&emsp;å°½ç®¡æœ‰ä¸Šè¿°çš„ä¸€äº›ç¼ºç‚¹ï¼ŒPWA æŠ€æœ¯ä»ç„¶æœ‰å¾ˆå¤šå¯ä»¥å€Ÿé‰´å’Œä½¿ç”¨çš„ç‚¹ï¼š

- Service Worker æŠ€æœ¯å®ç°ç¦»çº¿ç¼“å­˜ï¼Œå¯ä»¥å°†ä¸€äº›ä¸ç»å¸¸æ›´æ”¹çš„é™æ€æ–‡ä»¶æ”¾åˆ°ç¼“å­˜ä¸­ï¼Œæå‡ç”¨æˆ·ä½“éªŒã€‚
- Service Worker å®ç°æ¶ˆæ¯æ¨é€ï¼Œä½¿ç”¨æµè§ˆå™¨æ¨é€åŠŸèƒ½ï¼Œå¸å¼•ç”¨æˆ·
- æ¸è¿›å¼å¼€å‘ï¼Œå°½ç®¡ä¸€äº›æµè§ˆå™¨æš‚æ—¶ä¸æ”¯æŒï¼Œå¯ä»¥åˆ©ç”¨ä¸Šè¿°æŠ€æœ¯**ç»™ä½¿ç”¨æ”¯æŒæµè§ˆå™¨çš„ç”¨æˆ·å¸¦æ¥æ›´å¥½çš„ä½“éªŒ**ã€‚

> å½“ç„¶ï¼Œåœ¨é€šçŸ¥è¿™ä¸€å—å„¿ï¼ŒæŠ›å¼€ PWA ä¸è°ˆï¼Œ[æµè§ˆå™¨é€šçŸ¥ API Notification](https://zhuanlan.zhihu.com/p/346800213){:target='\_blank'}ä¹Ÿæ˜¯ä¸€ä¸ªä¸é”™çš„é€‰æ‹©ã€‚

## Javascript Workers

&emsp;&emsp;æˆ‘ä»¬çŸ¥é“ï¼ŒJavaScript æ˜¯å›´ç»•å•çº¿ç¨‹çš„æ¦‚å¿µè®¾è®¡çš„ï¼Œç¼ºä¹å®ç°åƒåŸç”Ÿ App é‚£æ ·çš„å¤šçº¿ç¨‹æ¨¡å‹æ‰€éœ€çš„åŠŸèƒ½ï¼Œæ¯”å¦‚å…±äº«å†…å­˜ã€‚

&emsp;&emsp;æµè§ˆå™¨ä½¿ç”¨å•ä¸ªçº¿ç¨‹ï¼ˆä¸»çº¿ç¨‹ï¼‰æ¥è¿è¡Œç½‘é¡µä¸­çš„æ‰€æœ‰ JavaScriptã€æ‰§è¡Œæ¸²æŸ“é¡µé¢å’Œæ‰§è¡Œåƒåœ¾æ”¶é›†ç­‰ä»»åŠ¡ã€‚è¿è¡Œè¿‡å¤šçš„ JavaScript ä»£ç ä¼šé˜»å¡ä¸»çº¿ç¨‹ï¼Œå»¶è¿Ÿæµè§ˆå™¨æ‰§è¡Œè¿™äº›ä»»åŠ¡å¹¶å¯¼è‡´ç³Ÿç³•çš„ç”¨æˆ·ä½“éªŒã€‚

&emsp;&emsp;åœ¨ Web ä¸­å¯ä»¥é€šè¿‡ä½¿ç”¨ Workers åœ¨åå°çº¿ç¨‹ä¸­è¿è¡Œè„šæœ¬æ¥å®ç°ç±»ä¼¼å¤šçº¿ç¨‹çš„æ¨¡å¼ï¼Œå…è®¸å®ƒä»¬æ‰§è¡Œä»»åŠ¡è€Œä¸å¹²æ‰°ä¸»çº¿ç¨‹ã€‚Workers æ˜¯è¿è¡Œåœ¨å•ç‹¬çº¿ç¨‹ä¸Šçš„æ•´ä¸ª JavaScript ä½œç”¨åŸŸï¼Œæ²¡æœ‰ä»»ä½•å…±äº«å†…å­˜ã€‚

&emsp;&emsp;ä¸€èˆ¬æ¥è¯´ï¼ŒWorker å¯ä»¥è®©è„šæœ¬åœ¨æµè§ˆå™¨ä¸»çº¿ç¨‹ä¹‹å¤–çš„å•ç‹¬çš„çº¿ç¨‹ä¸Šè¿è¡Œã€‚å¦‚æœä½ æƒ³è¦åœ¨ HTML æ–‡æ¡£ä¸­å¼•ç”¨ä¸€ä¸ª`<script>`æ ‡ç­¾çš„å…¸å‹çš„ JavaScript æ–‡ä»¶ï¼Œå®ƒä¼šè¿è¡Œåœ¨ä¸»çº¿ç¨‹ä¸Šã€‚å¦‚æœä¸»çº¿ç¨‹ä¸Šæœ‰å¤ªå¤šçš„è®¡ç®—ï¼Œä¼šæ‹–æ…¢ç½‘ç«™çš„é€Ÿåº¦ï¼Œé€ æˆäº¤äº’å¡é¡¿å’Œå“åº”å»¶è¿Ÿã€‚Web workerï¼ŒService worker å’Œ Worklet éƒ½æ˜¯è®©è„šæ­¥è¿è¡Œåœ¨å•ç‹¬çš„çº¿ç¨‹ä¸Šçš„ã€‚

![workers](https://king-hcj.github.io/images/posts/pwa/workers.png?raw=true)

> å‚è€ƒèµ„æ–™ï¼š[Web workers vs Service workers vs Worklets](https://bitsofco.de/web-workers-vs-service-workers-vs-worklets/){:target='\_blank'}

### Web worker

&emsp;&emsp;Web workers æ˜¯æœ€å¸¸ç”¨çš„ worker ç±»å‹ã€‚å®ƒä¸åƒå¦å¤–ä¸¤ç§ï¼Œå®ƒä»¬é™¤äº†è¿è¡Œåœ¨ä¸»çº¿ç¨‹å¤–çš„ç‰¹æ€§å¤–ï¼Œæ²¡æœ‰ä¸€ä¸ªç‰¹æ®Šçš„åº”ç”¨åœºæ™¯ã€‚æ‰€ä»¥ï¼ŒWeb worker å¯ä»¥ç”¨äºå‡å°‘ä¸»çº¿ç¨‹ä¸Šå¤§é‡çš„çº¿ç¨‹æ´»åŠ¨ã€‚

![web-worker](https://king-hcj.github.io/images/posts/pwa/web-worker.jpeg?raw=true)

> æ¨èé˜…è¯»ï¼š[Workers overview](https://web.dev/workers-overview/){:target='\_blank'}ã€‚

&emsp;&emsp;ä¸€ä¸ªå¾ˆå¥½çš„ä¾‹å­æ˜¯å‰æ–‡æåˆ°çš„å›¾åƒå¤„ç† Web åº”ç”¨ç¨‹åº[Squoosh](https://squoosh.app/){:target='\_blank'}ï¼Œå®ƒ**ä½¿ç”¨ Web Worker æ¥è¿›è¡Œå›¾åƒå¤„ç†ä»»åŠ¡ï¼Œè®©ä¸»çº¿ç¨‹å¯ä¾›ç”¨æˆ·ä¸åº”ç”¨ç¨‹åºè¿›è¡Œä¸ä¸­æ–­çš„äº¤äº’**ã€‚

&emsp;&emsp;[PROXX](https://proxx.app/){:target='\_blank'}ä¹Ÿä½¿ç”¨äº† Web worker å’Œ Service Worker ç›¸å…³æŠ€æœ¯ï¼Œå…·ä½“å¯å‚è€ƒ[Proxx: Building Fast Web Applications](https://www.infoq.com/news/2019/06/proxx-fast-web-apps/){:target='\_blank'}ã€‚

&emsp;&emsp;Web Worker æœ‰ä»¥ä¸‹å‡ ä¸ªä½¿ç”¨æ³¨æ„ç‚¹ï¼š

- åŒæºé™åˆ¶ï¼šåˆ†é…ç»™ Worker çº¿ç¨‹è¿è¡Œçš„è„šæœ¬æ–‡ä»¶ï¼Œå¿…é¡»ä¸ä¸»çº¿ç¨‹çš„è„šæœ¬æ–‡ä»¶åŒæºã€‚
- DOM é™åˆ¶ï¼šWorker çº¿ç¨‹æ‰€åœ¨çš„å…¨å±€å¯¹è±¡ï¼Œä¸ä¸»çº¿ç¨‹ä¸ä¸€æ ·ï¼Œæ— æ³•è¯»å–ä¸»çº¿ç¨‹æ‰€åœ¨ç½‘é¡µçš„ DOM å¯¹è±¡ï¼Œä¹Ÿæ— æ³•ä½¿ç”¨ documentã€windowã€parent è¿™äº›å¯¹è±¡ã€‚ä½†æ˜¯ï¼ŒWorker çº¿ç¨‹å¯ä»¥ä½¿ç”¨ navigator å¯¹è±¡å’Œ location å¯¹è±¡ã€‚
- é€šä¿¡è”ç³»ï¼šWorker çº¿ç¨‹å’Œä¸»çº¿ç¨‹ä¸åœ¨åŒä¸€ä¸ªä¸Šä¸‹æ–‡ç¯å¢ƒï¼Œå®ƒä»¬ä¸èƒ½ç›´æ¥é€šä¿¡ï¼Œå¿…é¡»é€šè¿‡æ¶ˆæ¯ï¼ˆpostMessageï¼‰å®Œæˆã€‚
- è„šæœ¬é™åˆ¶ï¼šWorker çº¿ç¨‹ä¸èƒ½æ‰§è¡Œ alert()æ–¹æ³•å’Œ confirm()æ–¹æ³•ï¼Œä½†å¯ä»¥ä½¿ç”¨ XMLHttpRequest å¯¹è±¡å‘å‡º AJAX è¯·æ±‚ã€‚
- æ–‡ä»¶é™åˆ¶ï¼šWorker çº¿ç¨‹æ— æ³•è¯»å–æœ¬åœ°æ–‡ä»¶ï¼Œå³ä¸èƒ½æ‰“å¼€æœ¬æœºçš„æ–‡ä»¶ç³»ç»Ÿï¼ˆfile://ï¼‰ï¼Œå®ƒæ‰€åŠ è½½çš„è„šæœ¬ï¼Œå¿…é¡»æ¥è‡ªç½‘ç»œã€‚

> æ›´å¤šä½¿ç”¨ç»†èŠ‚å¯å‚è€ƒé˜®ä¸€å³°çš„[Web Worker ä½¿ç”¨æ•™ç¨‹](https://www.ruanyifeng.com/blog/2018/07/web-worker.html){:target='\_blank'}

### Service worker

&emsp;&emsp;Service workers ä¸»è¦æ˜¯æä¾›è¯¦ç»†çš„**æµè§ˆå™¨å’Œç½‘ç»œ/ç¼“å­˜é—´çš„ä»£ç†æœåŠ¡**ï¼Œå¦‚ä¸‹å›¾æ‰€ä»¥ï¼š

![service-worker](https://king-hcj.github.io/images/posts/pwa/service-worker.jpeg?raw=true)

&emsp;&emsp;2014 å¹´ï¼ŒW3Cï¼ˆä¸‡ç»´ç½‘è”ç›Ÿï¼‰å…¬å¸ƒäº† Service Worker çš„ç›¸å…³è‰æ¡ˆï¼Œä½†çœŸæ­£åœ¨ç”Ÿäº§ç¯å¢ƒè¢« Chrome æ”¯æŒæ˜¯åœ¨ 2015 å¹´ï¼Œæ¯”å¾®ä¿¡å°ç¨‹åºè¦æ—©ä¸¤å¹´ã€‚

&emsp;&emsp;ä¸‹å›¾å±•ç¤ºäº† Service workers çš„ç”Ÿå‘½å‘¨æœŸï¼š

![sw-lifecycle](https://king-hcj.github.io/images/posts/pwa/sw-lifecycle.gif?raw=true)

&emsp;&emsp;è€Œä¸‹é¢è¿™å¼ å›¾åˆ™**å‡ ä¹æ¶µç›–äº† Service workers æ‰€æœ‰æœ€é‡è¦çš„çŸ¥è¯†ç‚¹**ï¼š

> åŸå›¾æ¥è‡ª GitHubï¼š[service-workers-101](https://github.com/delapuente/service-workers-101){:target='\_blank'}

![sw-lifecycle](https://king-hcj.github.io/images/posts/pwa/sw-lifecycle.webp?raw=true)

#### HTTP ç¼“å­˜ä¸ Service Worker ç¼“å­˜

&emsp;&emsp;å¯èƒ½ä½ ä¼šå¥½å¥‡ï¼Œ**ç”¨ Service Workers æ¥åšç¼“å­˜ï¼ŸHTTP ç¼“å­˜å®ƒä¸é¦™å—ï¼Ÿ**æˆ‘ä»¬å¯ä»¥ç®€å•çœ‹çœ‹è¿™ä¸¤è€…çš„åŒºåˆ«ï¼š

- HTTP ç¼“å­˜ä¸­ï¼ŒWeb æœåŠ¡å™¨å¯ä»¥ä½¿ç”¨ Expires é¦–éƒ¨æ¥é€šçŸ¥ Web å®¢æˆ·ç«¯ï¼Œå®ƒå¯ä»¥ä½¿ç”¨èµ„æºçš„å½“å‰å‰¯æœ¬ï¼Œç›´åˆ°æŒ‡å®šçš„â€œè¿‡æœŸæ—¶é—´â€ã€‚åè¿‡æ¥ï¼Œæµè§ˆå™¨å¯ä»¥ç¼“å­˜æ­¤èµ„æºï¼Œå¹¶ä¸”åªæœ‰åœ¨æœ‰æ•ˆæœŸæ»¡åæ‰ä¼šå†æ¬¡æ£€æŸ¥æ–°ç‰ˆæœ¬ã€‚
  ä½¿ç”¨ HTTP ç¼“å­˜æ„å‘³ç€ä½ è¦ä¾èµ–æœåŠ¡å™¨æ¥å‘Šè¯‰ä½ ä½•æ—¶ç¼“å­˜èµ„æºå’Œä½•æ—¶è¿‡æœŸï¼ˆå½“ç„¶ï¼ŒHTTP ç¼“å­˜æ§åˆ¶è¿˜åŒ…æ‹¬ cache-control,last-modified,etag ç­‰å­—æ®µï¼‰ã€‚

- Service Workers çš„å¼ºå¤§åœ¨äºå®ƒä»¬**æ‹¦æˆª HTTP è¯·æ±‚**çš„èƒ½åŠ›ï¼Œæ¥å—ä»»ä½•ä¼ å…¥çš„ HTTP è¯·æ±‚ï¼Œå¹¶å†³å®šæƒ³è¦å¦‚ä½•å“åº”ã€‚åœ¨ä½ çš„ Service Worker ä¸­ï¼Œå¯ä»¥ç¼–å†™é€»è¾‘æ¥å†³å®šæƒ³è¦ç¼“å­˜çš„èµ„æºï¼Œä»¥åŠéœ€è¦æ»¡è¶³ä»€ä¹ˆæ¡ä»¶å’Œèµ„æºéœ€è¦ç¼“å­˜å¤šä¹…ã€‚ä¸€åˆ‡å°½å½’ä½ æŒæ§ï¼ï¼ˆæ‰€ä»¥ï¼Œå‡ºäºå®‰å…¨è€ƒè™‘ï¼ŒService Workers è¦æ±‚åªèƒ½ç”± Https æ‰¿è½½ï¼‰

#### æ³¨æ„äº‹é¡¹

- Service worker è¿è¡Œåœ¨ worker ä¸Šä¸‹æ–‡ï¼ˆselfï¼‰ --> ä¸èƒ½è®¿é—® DOMï¼ˆè¿™é‡Œå…¶å®å’Œ Web Worker æ˜¯ä¸€æ ·çš„ï¼‰ï¼›
- å®ƒè®¾è®¡ä¸ºå®Œå…¨å¼‚æ­¥ï¼ŒåŒæ­¥ APIï¼ˆå¦‚ XHR å’Œ localStorageï¼‰ä¸èƒ½åœ¨ service worker ä¸­ä½¿ç”¨ï¼›
- å‡ºäºå®‰å…¨è€ƒé‡ï¼ŒService workers åªèƒ½ç”± HTTPS æ‰¿è½½ï¼›
- æŸäº›æµè§ˆå™¨çš„ç”¨æˆ·éšç§æ¨¡å¼ï¼ŒService Worker ä¸å¯ç”¨ï¼›
- å…¶ç”Ÿå‘½å‘¨æœŸä¸é¡µé¢æ— å…³ï¼ˆå…³è”é¡µé¢æœªå…³é—­æ—¶ï¼Œå®ƒä¹Ÿå¯ä»¥é€€å‡ºï¼Œæ²¡æœ‰å…³è”é¡µé¢æ—¶ï¼Œå®ƒä¹Ÿå¯ä»¥å¯åŠ¨ï¼‰ã€‚

#### ç¦»çº¿ç¼“å­˜

&emsp;&emsp;ç”±äº Service Worker çš„å‡ºç°ï¼Œæˆ‘ä»¬ä¸å†å°è¯•ç¦»çº¿è§£å†³é—®é¢˜ï¼Œè€Œæ˜¯è®©**å¼€å‘äººå‘˜è‡ªå·±åŠ¨æ‰‹è§£å†³ç¼“å­˜é—®é¢˜**ã€‚é€šè¿‡å®ƒå¯ä»¥æ§åˆ¶ç¼“å­˜ä»¥åŠå¦‚ä½•å¤„ç†è¯·æ±‚ã€‚è¿™æ„å‘³ç€æ‚¨å¯ä»¥åˆ›å»ºè‡ªå·±çš„æ¨¡å¼ã€‚

&emsp;&emsp;ç¼“å­˜çš„æ¨¡å¼æœ‰å¾ˆå¤šä¸­ï¼Œåœ¨[ç¦»çº¿æŒ‡å—](https://web.dev/offline-cookbook/){:target='\_blank'}ä¸­ï¼Œå…¨é¢ä»‹ç»äº†å„ç§ç¼“å­˜çš„æ¨¡å¼ï¼Œåœ¨å®è·µä¸­ï¼Œä½ å¯èƒ½éœ€è¦æ ¹æ® URL å’Œä¸Šä¸‹æ–‡åŒæ—¶ä½¿ç”¨å¤šç§æ¨¡å¼ã€‚

&emsp;&emsp;å½“ç„¶ï¼Œæ— è®ºæ‚¨åšäº†å¤šå°‘ç¼“å­˜ï¼Œ Service Worker è¿›ç¨‹éƒ½ä¸ä¼šä½¿ç”¨ç¼“å­˜ï¼Œé™¤éä½ å‘Šè¯‰å®ƒä½•æ—¶ä»¥åŠå¦‚ä½•ä½¿ç”¨ã€‚ä¸‹å›¾å±•ç¤ºçš„æ˜¯ç¼“å­˜ä¼˜å…ˆçš„ç¤ºæ„å›¾ï¼š

![cache_prior](https://king-hcj.github.io/images/posts/pwa/cache_prior.png?raw=true)

&emsp;&emsp;å…¶ä»–ä¸€äº›ç¼“å­˜æ¨¡å¼ç®€å•æ¢³ç†å¦‚ä¸‹ï¼š

![cache](https://king-hcj.github.io/images/posts/pwa/cache.png?raw=true)

#### è°ƒè¯•

![service_debug](https://king-hcj.github.io/images/posts/pwa/service_debug.png?raw=true)

#### å…¼å®¹æ€§

- [Service Worker](https://caniuse.com/?search=Service%20Worker){:target='\_blank'}

![can_i_use_sw](https://king-hcj.github.io/images/posts/pwa/can_i_use_sw.png?raw=true)

- [manifest](https://caniuse.com/?search=manifest){:target='\_blank'}

![can_i_use_manifest](https://king-hcj.github.io/images/posts/pwa/can_i_use_manifest.png?raw=true)

&emsp;&emsp;å¯ä»¥çœ‹å‡ºï¼Œå…¼å®¹æ€§é—®é¢˜æœ€å¤§çš„å…¶å®è¿˜æ˜¯åœ¨ manifest.json çš„æ”¯æŒä¸Šã€‚

### Worklet

&emsp;&emsp;Worklet æ˜¯ä¸€ä¸ªéå¸¸è½»é‡çº§ã€é«˜åº¦å…·ä½“çš„ workerã€‚å®ƒã€‚å®ƒä»¬ä½¿æˆ‘ä»¬ä½œä¸ºå¼€å‘äººå‘˜èƒ½å¤Ÿè¿æ¥åˆ°æµè§ˆå™¨æ¸²æŸ“è¿‡ç¨‹çš„å„ä¸ªéƒ¨åˆ†ï¼ˆé’©å­ï¼‰ï¼Œè®©å¼€å‘äººå‘˜å¯ä»¥è®¿é—®æ¸²æŸ“ç®¡é“çš„åº•å±‚éƒ¨åˆ†ã€‚

&emsp;&emsp;å½“ä¸€ä¸ª web é¡µé¢æ­£åœ¨è¢«æ¸²æŸ“ï¼Œæµè§ˆå™¨ç»è¿‡å¾ˆå¤šæ­¥éª¤ã€‚åœ¨è¿™é‡Œæˆ‘ä»¬éœ€è¦å…³æ³¨çš„æœ‰å››æ­¥ï¼šStyleï¼ŒLayoutï¼ŒPaint å’Œ Compositeã€‚

&emsp;&emsp;åœ¨å±•ç¤ºç½‘é¡µæ—¶ï¼Œæµè§ˆå™¨ä¼šæ‰§è¡Œå¤šä¸ªæ­¥éª¤ã€‚åœ¨è¿™é‡Œæˆ‘ä»¬ä¸»è¦å…³æ³¨å››ä¸ªæ­¥éª¤ï¼šStyleï¼ŒLayoutï¼ŒPaint å’Œ Compositeï¼ˆåˆæˆï¼‰ã€‚

![frame-full](https://king-hcj.github.io/images/posts/pwa/frame-full.jpeg?raw=true)

&emsp;&emsp;Paint æ˜¯æµè§ˆå™¨å°†æ ·å¼åº”ç”¨äºæ¯ä¸ªå…ƒç´ çš„åœ°æ–¹ã€‚ä¸æ­¤æ¸²æŸ“é˜¶æ®µæŒ‚é’©çš„ Worklet æ˜¯ Paint Workletã€‚Paint Worklet å…è®¸æˆ‘ä»¬åˆ›å»ºè‡ªå®šä¹‰å›¾ç‰‡ï¼Œè¿™ä¸ªå›¾ç‰‡å¯ä»¥åº”ç”¨ä»»ä½• CSSï¼Œæ¯”å¦‚ background-image å±æ€§çš„å€¼ã€‚

&emsp;&emsp;è¦åˆ›å»ºä¸€ä¸ª Workletï¼Œå°±åƒæ‰€æœ‰ Worker ä¸€æ ·ï¼Œæˆ‘ä»¬åœ¨æˆ‘ä»¬çš„ä¸» javascript æ–‡ä»¶ä¸­æ³¨å†Œå®ƒï¼Œå¼•ç”¨ä¸“ç”¨çš„ Worklet æ–‡ä»¶ã€‚

```js
/* main.js */
CSS.paintWorklet.addModule('myWorklet.js');
```

&emsp;&emsp;åœ¨æˆ‘ä»¬çš„ Worklet æ–‡ä»¶ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥åˆ›å»ºè‡ªå®šä¹‰å›¾åƒã€‚è¯¥ paint æ–¹æ³•çš„å·¥ä½œæ–¹å¼ä¸ Canvas API éå¸¸ç›¸ä¼¼ã€‚è¿™æ˜¯ä¸€ä¸ªç®€å•çš„é»‘ç™½æ¸å˜ç¤ºä¾‹ã€‚

```js
/* myWorklet.js */

registerPaint(
  'myGradient',
  class {
    paint(ctx, size, properties) {
      var gradient = ctx.createLinearGradient(0, 0, 0, size.height / 3);
      gradient.addColorStop(0, 'black');
      gradient.addColorStop(0.7, 'rgb(210, 210, 210)');
      gradient.addColorStop(0.8, 'rgb(230, 230, 230)');
      gradient.addColorStop(1, 'white');

      ctx.fillStyle = gradient;
      ctx.fillRect(0, 0, size.width, size.height / 3);
    }
  }
);
```

&emsp;&emsp;æœ€åï¼Œæˆ‘ä»¬å¯ä»¥åœ¨ CSS ä¸­ä½¿ç”¨è¿™ä¸ªæ–°çš„ Workletï¼Œæˆ‘ä»¬åˆ›å»ºçš„è‡ªå®šä¹‰å›¾åƒå°†åƒä»»ä½•å…¶ä»–èƒŒæ™¯å›¾åƒä¸€æ ·åº”ç”¨ã€‚

```css
div {
  background-image: paint(myGradient);
}
```

&emsp;&emsp;é™¤äº† Paint Workletï¼Œè¿˜æœ‰å…¶ä»–çš„ worklet å¯ä»¥è¿æ¥åˆ°æ¸²æŸ“è¿‡ç¨‹çš„å…¶ä»–é˜¶æ®µã€‚Animation Worklet è¿æ¥åˆ° Composite é˜¶æ®µï¼Œè€Œ Layout Worklet è¿æ¥åˆ° Layout é˜¶æ®µã€‚

### æ€»ç»“

&emsp;&emsp;Web workerï¼ŒService worker å’Œ worklet éƒ½æ˜¯å°†è„šæœ¬è¿è¡Œåœ¨æµè§ˆå™¨ä¸»çº¿ç¨‹ä¹‹å¤–å•ç‹¬çš„çº¿ç¨‹ä¸­ï¼Œå®ƒä»¬ä¹‹é—´çš„åŒºåˆ«æ˜¯å®ƒä»¬æ‰€åº”ç”¨çš„åœºæ™¯å’Œä»–ä»¬çš„ç‰¹æ€§ã€‚

- Worklet æ˜¯æµè§ˆå™¨æ¸²æŸ“æµä¸­çš„é’©å­ï¼Œå¯ä»¥è®©æˆ‘ä»¬æœ‰æµè§ˆå™¨æ¸²æŸ“çº¿ç¨‹ä¸­åº•å±‚çš„æƒé™ï¼Œæ¯”å¦‚æ ·å¼å’Œå¸ƒå±€ï¼›
- Service worker æ˜¯æµè§ˆå™¨å’Œç½‘ç»œé—´çš„ä»£ç†ã€‚é€šè¿‡æ‹¦æˆªæ–‡æ¡£ä¸­å‘å‡ºçš„è¯·æ±‚ï¼Œservice worker å¯ä»¥ç›´æ¥è¯·æ±‚ç¼“å­˜ä¸­çš„æ•°æ®ï¼Œè¾¾åˆ°ç¦»çº¿è¿è¡Œçš„ç›®çš„ã€‚
- Web worker çš„é€šå¸¸ç›®çš„æ˜¯è®©æˆ‘ä»¬å‡è½»ä¸»çº¿ç¨‹ä¸­çš„å¯†é›†å¤„ç†å·¥ä½œã€‚

## PWA å‘å±•ä¸ç°çŠ¶

### PWA in China

&emsp;&emsp;çœ‹çœ‹ Google å®˜æ–¹å®£ä¼ è¾ƒå¤šçš„ PWA æ¡ˆä¾‹å°±ä¼šå‘ç°ï¼ŒFlipKartã€Housing.com æ¥è‡ªå°åº¦ï¼›Lyftã€åç››é¡¿é‚®æŠ¥æ¥è‡ªåŒ—ç¾ï¼›å”¯ä¸€æ¥è‡ªä¸­å›½çš„ AliExpress ä¸»è¦å¼€å±•çš„åˆ™æ˜¯æµ·å¤–ä¸šåŠ¡ã€‚

ç”±äºä¸­å›½çš„ç‰¹æ®Šæ€§ï¼ŒPWA çš„å‰æ™¯åœ¨ä¸€å®šç¨‹åº¦ä¸Šæ¯”è¾ƒæ‚²è§‚ï¼š

- å›½å†…è¾ƒé‡è§† iOSï¼Œè€Œ iOS ç›®å‰è¿˜ä¸æ”¯æŒ PWAã€‚
- å›½å†…çš„ Android å®ä¸ºã€Œå®‰å“ã€ï¼Œä¸è‡ªå¸¦ Chrome æ˜¯ä¸€ï¼Œå¯èƒ½è¿˜ä¼šæœ‰å…¶ä»–å…¼å®¹é—®é¢˜ã€‚
- å›½å†…å‚å•†å¯èƒ½å¹¶ä¸ä¼šåƒä¸‰æ˜Ÿé‚£æ ·å¯¹æ¨åŠ¨è‡ªå®¶æµè§ˆå™¨æ”¯æŒ PWA é‚£ä¹ˆæ„Ÿå…´è¶£ã€‚
- ä¾èµ– GCM æ¨é€çš„é€šçŸ¥ä¸å¯ç”¨ï¼ŒWeb Push Protocol è¿˜æ²¡æœ‰å›½å†…çš„æ¨é€æœåŠ¡å®ç°ã€‚
- å›½å†… webview ç¯å¢ƒè¾ƒä¸ºå¤æ‚ï¼ˆæ¯”å¦‚å¾®ä¿¡ï¼‰ï¼Œé»‘ç§‘æŠ€æ¯”è¾ƒå¤šã€‚

&emsp;&emsp;åè§‚å°åº¦ï¼Œç”±äº Google æœåŠ¡å¥å…¨ã€æ ‡é… Chrome çš„ Android æ‰‹æœºå¸‚å ç‡éå¸¸é«˜ï¼ŒPWA çš„ç”¨æˆ·è¾¾åˆ°ç‡ç®€ç›´ç›´é€¼ 100%ï¼Œä¹Ÿéš¾å…è·å¾—æ— æ•°å¥½è¯„ä¸æ”¯æŒäº†ã€‚

> å‚è€ƒèµ„æ–™ï¼š [ä¸‹ä¸€ä»£ Web åº”ç”¨æ¨¡å‹ â€”â€” Progressive Web App](https://huangxuan.me/2017/02/09/nextgen-web-pwa/){:target='\_blank'} &#124; [å°ç¨‹åºçš„è€ç¥–å®— PWA ä¸ºä»€ä¹ˆæ²¡æœ‰ç«èµ·æ¥ï¼Ÿ](https://blog.csdn.net/qq_37860930/article/details/97236557){:target='\_blank'}

### ç™¾åº¦

&emsp;&emsp;åœ¨ 2017 å¹´ 7 æœˆ 5 æ—¥â€œç™¾åº¦ AI å¼€å‘è€…å¤§ä¼šâ€ï¼ˆBaidu Create2017ï¼‰â€”â€”Web ç”Ÿæ€åˆ†è®ºå›ä¸Šï¼Œç™¾åº¦å¼€å‘è€…ä»‹ç»äº†ç™¾åº¦ Lavas è§£å†³æ–¹æ¡ˆï¼Œå¸®åŠ©å¼€å‘è€…å¿«é€Ÿæ­å»º PWA åº”ç”¨ã€‚

&emsp;&emsp;lavas ä¸æ˜¯ä¸€ä¸ªæ¡†æ¶ï¼Œè€Œæ˜¯ä¸€ä¸ªåŸºäº vue çš„ PWA è§£å†³æ–¹æ¡ˆï¼Œé€šè¿‡ lavas å¯¼å‡ºçš„æ¨¡æ¿å¸®åŠ©å¼€å‘è€…è§£å†³äº†æ¥å…¥ PWA è¿‡ç¨‹ä¸­é‡åˆ°çš„é—®é¢˜ï¼š

- Service Worker ç”Ÿæˆ
- Service Worker æ›´æ–°ï¼Œä»¥åŠ sw æ›´æ–°åçš„æ“ä½œ
- App Skeletonï¼Œé¡µé¢æ¸²æŸ“å®Œæˆä¹‹å‰çš„é¡µé¢æ¡†æ¶
- é¡µé¢åˆ‡æ¢å‰è¿›åé€€è¿‡æ¸¡åŠ¨ç”»
- App Shellï¼Œé›†æˆäº† vuetify ç»„ä»¶åº“
- ä¸»é¢˜åˆ‡æ¢
- vue çš„å›¾æ ‡è§£å†³æ–¹æ¡ˆ...

&emsp;&emsp;è€Œç°åœ¨ lavas å®˜ç½‘å·²ç»æ— æ³•è®¿é—®ï¼Œè¿™åœ¨å¾ˆå¤§ç¨‹åº¦ä¸Šå¯ä»¥ååº” PWA åœ¨å›½å†…ä¸šåŠ¡çš„ä¸€ä¸ªç°çŠ¶ã€‚

### å¾®è½¯

&emsp;&emsp;Microsoft ä¾ç„¶åœ¨ç»´æŠ¤ç€ç›¸å…³æ–‡æ¡£ï¼š[Get started with Progressive Web Apps](https://docs.microsoft.com/en-us/microsoft-edge/progressive-web-apps-chromium/how-to/){:target='\_blank'}ï¼Œæ—¶é—´æ˜¾ç¤ºï¼Œæœ€è¿‘æ›´æ–°æ—¶ 2022 å¹´ 3 æœˆ 1ã€‚

![Microsoft](https://king-hcj.github.io/images/posts/pwa/microsoft.png?raw=true)

## æ€»ç»“ï¼šAppã€å°ç¨‹åºã€å¿«åº”ç”¨ä¸ App Clips

[![App](https://king-hcj.github.io/images/posts/pwa/App.png?raw=true)](https://www.biaodianfu.com/app-next.html){:target='\_blank'}

> é«˜æ¸…å¤§å›¾å¯ç‚¹å‡»[è¿™é‡Œ](https://king-hcj.github.io/images/posts/pwa/App.png?raw=true){:target='\_blank'}æŸ¥çœ‹ã€‚

## æ¨èå‚è€ƒèµ„æ–™

- [Learn PWA](https://web.dev/learn/pwa/){:target='\_blank'}
- [æ¸è¿›å¼ Web åº”ç”¨](https://web.dev/progressive-web-apps/){:target='\_blank'}
- [è®²è®² PWA](https://segmentfault.com/a/1190000012353473){:target='\_blank'}
- [6 myths of Progressive Web Apps](https://medium.com/samsung-internet-dev/6-myths-of-progressive-web-apps-81e28ca9d2b1){:target='\_blank'}
- [PWA æ–‡æ¡£](https://www.wenjiangs.com/docs/pwa-docs){:target='\_blank'}
- [ç½‘ç«™æ¸è¿›å¼å¢å¼ºä½“éªŒ(PWA)æ”¹é€ ï¼šService Worker åº”ç”¨è¯¦è§£](https://lzw.me/a/pwa-service-worker.html){:target='\_blank'}
- [Web ç¦»çº¿åº”ç”¨è§£å†³æ–¹æ¡ˆâ€”â€”ServiceWorker](https://www.cnblogs.com/dojo-lzz/p/8047336.html){:target='\_blank'}
- [What self.skipWaiting() does to the service worker lifecycle](https://bitsofco.de/what-self-skipwaiting-does-to-the-service-worker-lifecycle/){:target='\_blank'}
- [ServiceWorker å·¥ä½œåŸç†ã€ç”Ÿå‘½å‘¨æœŸå’Œä½¿ç”¨åœºæ™¯](https://xie.infoq.cn/article/d6db2099c0064563a403c51ec){:target='\_blank'}

&emsp;&emsp;æœ¬æ–‡é¦–å‘äº[ä¸ªäººåšå®¢](https://king-hcj.github.io/2022/04/10/pwa-and-service-worker/){:target='\_blank'}ï¼Œæ¬¢è¿[æŒ‡æ­£å’Œ star](https://github.com/king-hcj/king-hcj.github.io){:target='\_blank'}ã€‚
